{% extends "base.html" %}
{% block title %}Profile{% endblock %}
{% block content %}
<div class="container wrapper flex-grow-1">
  <h1>Профиль</h1>
  <img src="{{ g.user.photo }}" width="200" height="200" alt="">
  <form method="post">
    <div class="form-group p-2">
        <label for="formFile" class="form-label">Изменить фото</label>
        <input class="form-control" type="file" id="formFile">
    </div>
    

    <div class="form-group p-2">
      <label for="username">Имя</label>
      <input name="username" type="username" class="form-control" id="userInputName" aria-describedby="usernameErrors" placeholder="{{ g.user.name }}">
      {% if fields_errs.username %}
        <ul>
          {% for err in fields_errs.username %}
            <li class="text-danger">
              <small id="usernameErrors" class="form-text text-danger">{{ err }}</small>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div class="form-group p-2">
      <label for="userInputEmail">Почта</label>
      <input name="email" type="email" class="form-control" id="userInputEmail" aria-describedby="emailErrors" placeholder="{{ g.user.email }}">
      {% if fields_errs.email %}
        <ul>
          {% for err in fields_errs.email %}
            <li class="text-danger">
              <small id="emailErrors" class="form-text text-danger">{{ err }}</small>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div class="form-group p-2">
      <label for="userInputPassword">Пароль</label>
      <input name="password" type="password" class="form-control" id="userInputPassword" aria-describedby="passwordErrors" placeholder="Ваш пароль">
      {% if fields_errs.password %}
        <ul>
          {% for err in fields_errs.password %}
            <li class="text-danger">
              <small id="passwordErrors" class="form-text text-danger">{{ err }}</small>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

    <div class="form-group p-2">
      <label for="access_password">Подтверждение пароля</label>
      <input name="access_password" type="password" class="form-control" id="access_password" aria-describedby="passwordErrors2" placeholder="Подтверждение пароля">
      {% if fields_errs.access_password %}
        <ul>
          {% for err in fields_errs.access_password %}
            <li class="text-danger">
              <small id="passwordErrors2" class="form-text text-danger">{{ err }}</small>
            </li>
          {% endfor %}
        </ul>
      {% endif %}
    </div>

      <small class="text-secondary p-2">Если вы оставите поле пустым, то эти поля обновляться не будут, кроме пароля, для обновления он обязателен всегда. Если вы не обновляете пароль, то подтверждать его ненужно.</small>
    <div class="text-end p-2">
      <small class="text-secondary p-2">Последний раз обновлялся: {{ g.user.updated_at }}</small>
    </div>

    <div class="p-2">
      <button type="submit" class="btn btn-primary">Сохранить изменения</button>
    </div>
  </form>
</div>
{% endblock %}
